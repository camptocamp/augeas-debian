Description: building out of source tree when gnulib is significantly involved
Origin: vendor
Bug: https://fedorahosted.org/augeas/ticket/270
Forwarded: https://fedorahosted.org/augeas/ticket/270
Reviewed-By: Igor Pashev <pashev.igor@gmail.com>
Last-Update: <2012-04-17>

--- augeas-0.10.0.orig/src/Makefile.am
+++ augeas-0.10.0/src/Makefile.am
@@ -1,5 +1,5 @@
 GNULIB= ../gnulib/lib/libgnu.la
-GNULIB_CFLAGS= -I $(top_srcdir)/gnulib/lib
+GNULIB_CFLAGS= -I $(top_builddir)/gnulib/lib -I $(top_srcdir)/gnulib/lib
 
 AM_CFLAGS = @AUGEAS_CFLAGS@ @WARN_CFLAGS@ $(GNULIB_CFLAGS) $(LIBXML_CFLAGS)
 
--- augeas-0.10.0.orig/src/Makefile.in
+++ augeas-0.10.0/src/Makefile.in
@@ -1023,7 +1023,7 @@ top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
 GNULIB = ../gnulib/lib/libgnu.la
-GNULIB_CFLAGS = -I $(top_srcdir)/gnulib/lib
+GNULIB_CFLAGS = -I $(top_builddir)/gnulib/lib -I $(top_srcdir)/gnulib/lib
 AM_CFLAGS = @AUGEAS_CFLAGS@ @WARN_CFLAGS@ $(GNULIB_CFLAGS) $(LIBXML_CFLAGS)
 AM_YFLAGS = -d -p spec_
 EXTRA_DIST = try augeas_sym.version fa_sym.version
